## 概要

Raspberry Pi Picoから赤外線受信器で受信、赤外線LEDで送信するサンプルプログラムです。
赤外線で通信する家電などを制御することができます。

プログラムを開始すると赤外線受信待ちとなります。
赤外線を受信すると、そのデータをシリアルモニターに表示し、3秒後に受信したデータと同じものを送信します。


## 対応製品

- [RPi TPH Monitor](https://www.indoorcorgielec.com/products/rpi-tph-monitor-rev2/)
- [RPZ-IR-Sensor](https://www.indoorcorgielec.com/products/rpz-ir-sensor/)
- [RPZ-PIRS](https://www.indoorcorgielec.com/products/rpz-pirs/)


## 使い方

プロジェクトの開き方やボードの切り替えなど、各サンプルプログラム共通の使い方は[こちら](../)を参照してください。


### シリアルモニター

USBとUART0/GP0の両方へ動作ログを出力します。
シリアルモニターでいずれかをモニターすることで、動作ログを確認することができます。
シリアルモニターの使い方については[こちらの記事](https://www.indoorcorgielec.com/resources/pico/serial-monitor/)を参照してください。


### 赤外線受信

プログラムを書き込んで実行すると、シリアルモニターに「Waiting for IR receive...」と表示され、赤外線受信待ち状態になります。

エアコンやテレビなどのリモコンを使い、拡張基板の赤外線受信器に向かって送信してください。

受信されると、シリアルモニターに受信した赤外線データが表示されます。
受信データは、赤外線のパルス波形の時間と、空白時間をus(マイクロ秒)で順に記録したものです。


### 赤外線送信

受信から3秒後に、受信したデータと同じものを送信します。基板の赤外線LEDをエアコンやテレビなどの機器に向けてください。
送信した赤外線に機器が反応すれば成功です！

送信後は赤外線受信状態になり、同じ動作を繰り返します。


### 赤外線フォーマットについて

本プログラムでは, 赤外線の信号が送信されている時間と, 停止している時間を[us]で記録したデータを送受信に使用しています. 

例えば, 以下のような受信データが表示された場合, 3277usの信号送信の後に1609usの停止時間があり, 
次は453usの信号送信... といった具合です. 
~~~
3277, 1609, 453, 364, ...
~~~

同様の形式のデータをinfrared_send関数に渡すことで赤外線を送信することができます. 

この方法は赤外線フォーマットに関わらず, 受信したデータを再現することが可能です. 
